I"µ<h2 id="ë“¤ì–´ê°€ê¸°-ì•ì„œ">ë“¤ì–´ê°€ê¸° ì•ì„œ</h2>
<p>Nest.js(ì´í•˜ Nest)ëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ í“¨ì–´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ëª¨ë‘ì™€ í˜¸í™˜ë˜ì§€ë§Œ, ì–¸ì–´ì˜ ê°€ì¥ ìµœì‹  ê¸°ìˆ ì„ ì‚¬ìš©í•¨ì— ë”°ë¼ ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í• ë•ŒëŠ” ë°”ë²¨ ì»´íŒŒì¼ëŸ¬ê°€ í•„ìš”í•˜ë‹¤.</p>

<h2 id="setup">Setup</h2>
<p>Nest clië¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ì¥ ê°„í¸í•˜ë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> @nestjs/cli
nest new project-name
</code></pre></div></div>

<p>ì´í›„ projectë¥¼ ìƒì„±í•˜ê³  ë‚˜ë©´, node-modulesì™€ ëª‡ê°œì˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ íŒŒì¼ë“¤ì´ ì„¤ì¹˜ë˜ê³  src/ ë””ë ‰í† ë¦¬ì— ì½”ì–´íŒŒì¼ë“¤ì´ ìƒì„±ëœë‹¤</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src
â”œâ”€app.controller.spec.ts
â”œâ”€app.controller.ts
â”œâ”€app.module.ts
â”œâ”€app.service.ts
â””â”€main.ts
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th>Â </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>app.controller.ts</td>
      <td>í•˜ë‚˜ì˜ ë¼ìš°íŠ¸ê°€ ìˆëŠ” ê¸°ë³¸ ì»¨íŠ¸ë¡¤ëŸ¬</td>
    </tr>
    <tr>
      <td>app.controller.spec.ts</td>
      <td>ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìœ„í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸</td>
    </tr>
    <tr>
      <td>app.module.ts</td>
      <td>ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ëª¨ë“ˆ</td>
    </tr>
    <tr>
      <td>app.serivce.ts</td>
      <td>ì‹±ê¸€ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ì„œë¹„ìŠ¤</td>
    </tr>
    <tr>
      <td>main.ts</td>
      <td>ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì </td>
    </tr>
  </tbody>
</table>

<p>ì´ì¤‘, main.tsì—ì„œëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë¶€íŠ¸ìŠ¤íŠ¸ë©í•˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NestFactory</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./app.module</span><span class="dl">'</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">bootstrap</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">NestFactory</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">AppModule</span><span class="p">);</span>
  <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">bootstrap</span><span class="p">();</span>
</code></pre></div></div>

<p>NestFactoryì—ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ëª‡ê°€ì§€ ì •ì  ë©”ì†Œë“œë“¤ì„ í¬í•¨í•˜ê³  ìˆê³ , create()ëŠ” INestApplication ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œì¡±í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤. 
ìœ„ì˜ ì½”ë“œë¥¼ í†µí•´ì„œ ë“¤ì–´ì˜¤ëŠ” HTTPìš”ì²­ì„ ëŒ€ê¸°í•˜ëŠ” HTTP ë¦¬ìŠ¤ë„ˆë¥¼ ê°„ë‹¨í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</p>

<p>ë¬¼ë¡  ìœ„ì—ì„œ ìƒì„±ëœ í”„ë¡œì íŠ¸ëŠ” ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì¡°ê¸ˆ ë” í¸ë¦¬í•˜ê²Œ ë§Œë“¤ì–´ì¤„ ë¿ì¸ ê°€ì„¤ëœ(scaffolded) í”„ë¡œì íŠ¸ë¼ëŠ”ê²ƒì„ ëª…ì‹¬í•´ì•¼ í•œë‹¤.</p>

<h2 id="controller">Controller</h2>
<p>ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª©ì ì€ íŠ¹ì • ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê²ƒì´ë‹¤. ë¼ìš°íŒ… ë©”ì»¤ë‹ˆì¦˜ì€ ì–´ë–¤ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìš”ì²­ì„ ë°›ëŠ”ì§€ì— ëŒ€í•´ì„œ ê´€ë¦¬í•œë‹¤. ê°€ë” ê°œë³„ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í•˜ë‚˜ ì´ìƒì˜ ê²½ë¡œë¥¼ ê°€ì§€ê³ , ë‹¤ë¥¸ ê²½ë¡œëŠ” ë‹¤ë¥¸ í–‰ë™ì„ ì·¨í• ìˆ˜ ìˆë‹¤.</p>

<p>ê¸°ë³¸ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ í´ë ˆìŠ¤ì™€ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤. ë°ì½”ë ˆì´í„°ëŠ” í´ë˜ìŠ¤ë¥¼ í•„ìˆ˜ì ì¸ ë©”íƒ€ë°ì´í„°ì™€ ì—°ê²°í•˜ê³  ë„¤ìŠ¤íŠ¸ê°€ ë¼ìš°íŒ…ë§µì„ ì‘ì„±í• ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>

<h3 id="routing">Routing</h3>
<p>ì´í•˜ ì˜ˆì œì—ì„œ ê¸°ë³¸ì ì€ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì •ì˜í•˜ëŠ”ë° í•„ìš”í•œ @Contoller() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.
@Controller(â€œcatsâ€) ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì„œ ì¼ë ¨ì˜ ê²½ë¡œë“¤ì„ ì‰½ê²Œ ë¬¶ì„ ìˆ˜ ìˆê³ , ì¤‘ë³µë˜ëŠ” ì½”ë“œë“¤ì„ ìµœì†Œí™” í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Controller</span><span class="p">,</span> <span class="nx">Get</span><span class="p">,</span> <span class="nx">Req</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Request</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">cats</span><span class="dl">'</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CatsController</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Get</span><span class="p">(</span><span class="dl">'</span><span class="s1">profile</span><span class="dl">'</span><span class="p">)</span>
  <span class="nx">findAll</span><span class="p">(@</span><span class="nd">Req</span><span class="p">()</span> <span class="nx">request</span><span class="p">:</span> <span class="nx">Request</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">This action returns cats profile</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ìœ„ì˜ ì˜ˆì œì—ì„œ GET /cats/profile ìš”ì²­ì„ ë³´ë‚´ë©´ â€œThis action returns cats profileâ€ì´ë¼ëŠ” ë¬¸êµ¬ë¥¼ ë°˜í™˜í•  ê²ƒì´ë‹¤. findAll()ì•ˆì— @Req()ë¥¼ ì‚½ì…í•¨ìœ¼ë¡œ ìš”ì²­ ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.
ìš”ì²­ ê°ì²´ëŠ” HTTPìš”ì²­ì„ ë‚˜íƒ€ë‚´ê³ , ì¿¼ë¦¬ ìŠ¤íŠ¸ë§, íŒŒë¼ë©”í„°, HTTP í—¤ë”, ê·¸ë¦¬ê³  ë°”ë””ì— ëŒ€í•œ ì†ì„±ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì—ì„œ, ì´ ì†ì„±ë“¤ì„ ì§ì ‘ ì¡ì„ í•„ìš”ëŠ” ì—†ë‹¤. ì„¸ë¶„í™”ëœ ë°ì½”ë ˆì´í„°ë¥¼ ì“¸ ìˆ˜ ìˆë”°.(@Body()ë‚˜ @Query()).
ì•„ë˜ì˜ í‘œëŠ” ì œê³µë˜ëŠ” ë°ì½”ë ˆì´í„°ì™€ ê¸°ë³¸ í”Œë«í¼(Node.js)ì— í•´ë‹¹ë˜ëŠ” ê°ì²´ë¥¼ ë³‘ê¸°í•´ë†“ì•˜ë‹¤.</p>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th>Â </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>@Request(), @Req()</td>
      <td>req</td>
    </tr>
    <tr>
      <td>@Response(), @Res()*</td>
      <td>res</td>
    </tr>
    <tr>
      <td>@Next()</td>
      <td>next</td>
    </tr>
    <tr>
      <td>@Session()</td>
      <td>req.session</td>
    </tr>
    <tr>
      <td>@Param(key?: string)</td>
      <td>req.params / req.params[key]</td>
    </tr>
    <tr>
      <td>@Body(key?: string)</td>
      <td>req.body / req.body[key]</td>
    </tr>
    <tr>
      <td>@Query(key?: string)</td>
      <td>req.query / req.query[key]</td>
    </tr>
    <tr>
      <td>@Headers(name?: string)</td>
      <td>req.headers / req.headers[name]</td>
    </tr>
    <tr>
      <td>@Ip()</td>
      <td>req.ip</td>
    </tr>
    <tr>
      <td>@HostParam()</td>
      <td>req.hosts</td>
    </tr>
  </tbody>
</table>

<p>*ê¸°ë³¸ HTTP í”Œë«í¼(ex. Express / Fastify)ì—ì„œì˜ í˜¸í™˜ì„±ì„ ìœ„í•´ NestëŠ” @Res()ì™€ @Response() ë°ì½”ë ˆì´í„°ë¥¼ ì œê³µí•œë‹¤. @Res()ëŠ” @Response()ì˜ ë³„ì¹­íˆê³ , ë‘˜ ë‹¤ ê¸°ë³¸ ë„¤ì´í‹°ë¸Œ í”Œë ›í¼ resopnseê°ì²´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ ë…¸ì¶œì‹œí‚¨ë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬(ex. types/express)ì— ëŒ€í•œ íƒ€ì…ë„ ê°€ì ¸ì™€ì•¼ ëª¨ë“  ì–´ë“œë²¤í‹°ì§€ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤. ë©”ì†Œë“œ í•¸ë“¤ëŸ¬ì— @Res()ë‚˜ @Response()ë¥¼ ì‚¬ì…ìí•  ë•Œ í•´ë‹¹ í•¸ë“¤ëŸ¬ì— ëŒ€í•´ Nestë¥¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë³„ ëª¨ë“œë¡œ ì„¤ì •í•˜ê³  ì‘ë‹µì„ ê´€ë¦¬í•´ì•¼ í•œë‹¤. ê·¸ë ‡ê²Œ í•˜ì§€ ì•Šì„ ê²½ìš°, Responseê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì‘ë‹µí•˜ëŠ”(res.json() / res.send()) ê²½ìš° HTTP ì„œë²„ê°€ ë©ˆì¶œ ê²ƒì´ë‹¤.</p>

<h3 id="ë¦¬ì†ŒìŠ¤">ë¦¬ì†ŒìŠ¤</h3>
<p>ì´ì „ì— Get ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±í•˜ì˜€ë‹¤. ì´ì™€ ê°™ì´, NestëŠ” ëª¨ë“  HTTPì˜ í‘œì¤€ ë©”ì†Œë“œë“¤ì— ëŒ€í•œ ë°ì½”ë ˆì´í„°ë¥¼ ì œê³µí•œë‹¤.
@Get(), @Post(), @Put(), @Delete(), @Patch(), @Options(), @Head().
ì¶”ê°€ì ìœ¼ë¡œ, @All()ì€ ìœ„ì˜ ëª¨ë“  ê²½ìš°ì— ëŒ€í•œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•œë‹¤.</p>

<h3 id="status-code">Status Code</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Post</span><span class="p">()</span>
<span class="p">@</span><span class="nd">HttpCode</span><span class="p">(</span><span class="mi">204</span><span class="p">)</span>
<span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="dl">'</span><span class="s1">This action adds a new cat</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
<p>ì•ì„œ ë§í–ˆë‹¤ì‹¶ì´, ì‘ë‹µì˜ ê¸°ë³¸ ìƒíƒœ ì½”ë“œëŠ” 200ì´ë‹¤(Post Requestì˜ ì‘ë‹µì½”ë“œê°€ 201ì¸ê²ƒì„ ì œì™¸í•˜ê³ ). 
ì‘ë‹µì˜ ìƒíƒœ ì½”ë“œë¥¼ ë³€ê²½í•˜ê³  ì‹¶ì€ ê²½ìš°, @HttpCode ë°ì½”ë ˆì´ì…˜ì„ í†µí•´ì„œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>

<h3 id="heaers">Heaers</h3>
<p>í—¤ë”ë¥¼ íŠ¹ì •í•˜ê¸° ìœ„í•´ì„œëŠ” @Header()ë°ì½”ë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ê±°ë‚˜, res.header()ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Post</span><span class="p">()</span>
<span class="p">@</span><span class="nd">Header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cache-Control</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="dl">'</span><span class="s1">This action adds a new cat</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="redirection">Redirection</h3>
<p>íŠ¹ì • URLë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜í•´ì£¼ê¸° ìœ„í•´ì„œ @Rediret()ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, res.redirect()ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
@Redirect()ëŠ” ë‘ê°€ì§€ ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, urlì™€ statusCodeì´ê³  ë‘ê°€ì§€ ëª¨ë‘ ì„ íƒì‚¬í•­ì´ë‹¤. ê¸°ë³¸ ê°’ì˜ statusCodeëŠ” 302(Found)ì´ë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Get</span><span class="p">()</span>
<span class="p">@</span><span class="nd">Redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://nestjs.com</span><span class="dl">'</span><span class="p">,</span> <span class="mi">301</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="route-parameters">Route parameters</h3>
<p>ë¼ìš°íŒ…ì„ í• ë•Œ URLì—ì„œ ë³€ë™ë˜ëŠ” ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ë¼ìš°íŒ…ì„ ì§„í–‰í•´ì•¼ í•  ê²½ìš°ê°€ ìˆë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Get</span><span class="p">(</span><span class="dl">'</span><span class="s1">:id</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">findOne</span><span class="p">(@</span><span class="nd">Param</span><span class="p">()</span> <span class="nx">params</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="k">return</span> <span class="s2">`This action returns a #</span><span class="p">${</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2"> cat`</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë”°.</p>

<h3 id="request-payload">Request Payload</h3>
<p>@Body()ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— DTO ìŠ¤í‚¤ë§ˆë¥¼ ê²°ì •í•´ì•¼ í•œë‹¤. DTOëŠ” ë°ì´í„°ê°€ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ê°ì²´ë¡œ, typescript ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ê°„ë‹¨í•œ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ DTO ìŠ¤í‚¤ë§ˆë¥¼ í™•ì¸í•  ìˆ˜ ìˆë”°. í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ì€ë°, í´ë˜ìŠ¤ëŠ” ES6í‘œì¤€ì˜ ì¼ë¶€ì´ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‹¤ì œ ì—”í‹°í‹°ë¡œ ìœ ì§€ë˜ê³  ì¸í„°í˜ì´ìŠ¤ëŠ” ì œê±°ë˜ê¸° ë•Œë¬¸ì— Nestê°€ ëŸ°íƒ€ì„ ì¤‘ì— ì´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">CreateCatDto</span> <span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">breed</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Post</span><span class="p">()</span>
<span class="k">async</span> <span class="nx">create</span><span class="p">(@</span><span class="nd">Body</span><span class="p">()</span> <span class="nx">createCatDto</span><span class="p">:</span> <span class="nx">CreateCatDto</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="dl">'</span><span class="s1">This action adds a new cat</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="ì‹¤í–‰">ì‹¤í–‰</h3>
<p>ì»¨íŠ¸ë¡¤ëŸ¬ ì •ì˜ í›„ì— Nestê°€ CatsControllerê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì•Œì§€ ëª»í•˜ë¯€ë¡œ, ê²°ê³¼ì ìœ¼ë¡œ ì´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.
ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í•­ìƒ ëª¨ë“ˆì— ì†í•˜ë¯€ë¡œ @Module()ë°ì½”ë ˆì´í„° ë‚´ controllersë°°ì—´ì— ì¶”ê°€í•¨ìœ¼ë¡œì„œ ëª¨ë“ˆ í´ë˜ìŠ¤ì— ë©”íƒ€ë°ì´í„°ë¥¼ ì²¨ë¶€í•˜ì˜€ê³ , Nestì´ì œ ì–´ë–¤ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§ˆìš´íŠ¸í•´ì•¼í•˜ëŠ”ì§€ ë°˜ì˜í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsController</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.controller</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsController</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{}</span>

</code></pre></div></div>

<h2 id="í”„ë¡œë°”ì´ë”">í”„ë¡œë°”ì´ë”</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// cats.service.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Cat</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./interfaces/cat.interface</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CatsService</span> <span class="p">{</span>
  <span class="k">private</span> <span class="k">readonly</span> <span class="nx">cats</span><span class="p">:</span> <span class="nx">Cat</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">create</span><span class="p">(</span><span class="nx">cat</span><span class="p">:</span> <span class="nx">Cat</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cats</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cat</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">findAll</span><span class="p">():</span> <span class="nx">Cat</span><span class="p">[]</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cats</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// interfaces/cat.interface.ts</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">Cat</span> <span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">breed</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// cats.controller.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Controller</span><span class="p">,</span> <span class="nx">Get</span><span class="p">,</span> <span class="nx">Post</span><span class="p">,</span> <span class="nx">Body</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CreateCatDto</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./dto/create-cat.dto</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats.service</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Cat</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./interfaces/cat.interface</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">cats</span><span class="dl">'</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CatsController</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">catsService</span><span class="p">:</span> <span class="nx">CatsService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Post</span><span class="p">()</span>
  <span class="k">async</span> <span class="nx">create</span><span class="p">(@</span><span class="nd">Body</span><span class="p">()</span> <span class="nx">createCatDto</span><span class="p">:</span> <span class="nx">CreateCatDto</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">catsService</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">createCatDto</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Get</span><span class="p">()</span>
  <span class="k">async</span> <span class="nx">findAll</span><span class="p">():</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Cat</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">catsService</span><span class="p">.</span><span class="nx">findAll</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>NestëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì˜ì¡´ì„± ì£¼ì…ì´ë¼ê³  ì•Œë ¤ì§„ ê°•ë ¥í•œ ë””ìì¸ íŒ¨í„´ì„ ë°”íƒ•ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ìˆë‹¤. ì´ ì˜ì¡´ì„± ì£¼ì…ì— ëŒ€í•œ ê¸€ì€ Angular ê³µì‹ ë¬¸ì„œ<a href="https://angular.io/guide/dependency-injection">ë§í¬</a>ë¥¼ ì½ì–´ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.</p>

<p>ìœ„ì˜ ì˜ˆì œì—ì„œ ë§Œë“¤ì–´ì§„ í”„ë¡œë°”ì´ë”ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë§ˆì°¬ê°€ì§€ë¡œ app.module.tsì— ë“±ë¡í•˜ì—¬ì•¼ í•œë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsController</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.controller</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.service</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{}</span>
</code></pre></div></div>

<h3 id="modules">Modules</h3>
<p>ëª¨ë“ˆì€ @Module()ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¡œì„œ, @Module()ë°ì½”ë ˆì´í„°ëŠ” Nestê°€ ì–´í”Œë ˆì´ì¼€ì´ì…˜ êµ¬ì¡°ë¥¼ êµ¬ì„±í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ì œê³µí•œë‹¤.</p>

<p>ëª¨ë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ìµœì†Œí•œ ë£¨íŠ¸ ëª¨ë“ˆì„ í¬í•¨í•œ í•˜ë‚˜ ì´ìƒì˜ ëª¨ë“ˆì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ë£¨íŠ¸ ëª¨ë“ˆì€ Nestê°€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê·¸ë˜í”„ë¥¼ ë§Œë“œëŠ”ë° ì‚¬ìš©ë˜ëŠ” ì‹œì‘ í¬ì¸íŠ¸ì´ë‹¤.</p>

<p>ìœ„ì—ì„œ ìƒì„±ëœ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤(í”„ë¡œë°”ì´ë”)ì™€ ê°™ì€ ëª¨ë“ˆë“¤ì„ ëª¨ìœ¼ê³ , í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¡œ ë‚´ë³´ë‚¸ í›„ ëª¨ë“  ëª¨ë“ˆë“¤ì„ ë£¨íŠ¸ ëª¨ë“ˆì—ì„œ ëª¨ì€ë‹¤</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// cats/cats.module.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsController</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats.controller</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats.service</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CatsModule</span> <span class="p">{}</span>
</code></pre></div></div>
<p>ìœ„ì—ì„œ ë§Œë“  ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ë¥¼ cats.module.tsì—ì„œ ëª¨ì€ í›„,</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.module.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.module</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsModule</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{}</span>
</code></pre></div></div>
<p>ë£¨íŠ¸ ëª¨ë“ˆì—ì„œ ëª¨ìœ¼ê²Œ ëœë‹¤</p>

<p>ì´ ê²½ìš°, í˜„ì¬ì˜ ë””ë ‰í† ë¦¬ ìƒí™©ì€ ë‹¤ìŒê³¼ ê°™ì•„ì§„ë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src
â”œâ”€cats
â”‚ â”œâ”€dto
â”‚ â”‚  â””â”€create-cat.dto.ts
â”‚ â””â”€â”€interfaces
â”‚    â”œâ”€cat.interface.ts
â”‚    â”œâ”€cats.controller.ts
â”‚    â”œâ”€cats.module.ts
â”‚    â””â”€cats.service.ts
â”œâ”€app.module.ts
â””â”€main.ts
</code></pre></div></div>

<h3 id="shared-modules">Shared modules</h3>
<p>ë„¤ìŠ¤íŠ¸ì—ì„œ ëª¨ë“ˆì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í†¤ì´ê³ , ì–´ëŠ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•˜ë˜ í•­ìƒ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤.
ëª¨ë“  ëª¨ë“ˆì€ ìë™ì ìœ¼ë¡œ ê³µìœ  ëª¨ë“ˆì´ ë˜ê³ , í•œë²ˆ ìƒì„±í•œ í›„ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì¬ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤. 
CatsServiceê°€ ì—¬ëŸ¬ ëª¨ë“ˆì—ì„œ ê³µìœ ë˜ëŠ”ê²ƒì„ ìƒê°í•´ë³´ì. ì´ê²ƒì„ í•˜ê¸° ìœ„í•´ì„œ, ë¨¼ì € CatsServiceí”„ë¡œë°”ì´ë”ë¥¼ ì•„ë˜ì˜ ì˜ˆì œ ì½”ë“œì²˜ëŸ¼ ëª¨ë“ˆì˜ exports ë°°ì—´ì— ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsController</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats.controller</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats.service</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsService</span><span class="p">],</span>
  <span class="na">exports</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsService</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CatsModule</span> <span class="p">{}</span>
</code></pre></div></div>
<p>ì´í›„ CatsModuleë¥¼ ì„í¬íŠ¸í•œ ëª¨ë“ˆì€ CatsServiceì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ , ë‹¤ë¥¸ ëª¨ë“ˆê³¼ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê²Œ ëœë‹¤.</p>

<h3 id="dependency-injection">Dependency Injection</h3>
<p>ëª¨ë“ˆ í´ë˜ìŠ¤ëŠ” í”„ë¡œë°”ì´ë”ì—ê²Œ ì˜ì¡´ì„± ì£¼ì…ì„ í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsController</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats.controller</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats.service</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CatsModule</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">catsService</span><span class="p">:</span> <span class="nx">CatsService</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>
<ul>
  <li>ìˆœí™˜ ì˜ì¡´ì„± ë¬¸ì œ<a href="https://docs.nestjs.com/fundamentals/circular-dependency">ë§í¬</a> ë•Œë¬¸ì—, ëª¨ë“ˆ í´ë˜ìŠ¤ëŠ” ê·¸ ìì‹ ì—ê²Œ ì˜ì¡´ì„± ì£¼ì…ì„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>
</ul>

<h2 id="middleware">Middleware</h2>
<p>ë¯¸ë“¤ì›¨ì–´ëŠ” ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì´ì „ì— í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ë¡œì¨, ìš”ì²­ ë° ì‘ë‹µ ê°ì²´ì— ì ‘ê·¼í•œë‹¤. nextë¯¸ë“¤ì›¨ì–´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ nextë¡œ ëª…ëª…ëœë‹¤.</p>

<p>Nest ë¯¸ë“¤ì›¨ì–´ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ expressì˜ ë¯¸ë“¤ì›¨ì–´ì™€ ë™ì¼í•˜ë‹¤. 
ë¯¸ë“¤ì›¨ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¼ì„ í•  ìˆ˜ ìˆë”°.</p>
<ul>
  <li>ì–´ë– í•œ ì½”ë“œ ì‹¤í–‰</li>
  <li>ìš”ì²­ê³¼ ì‘ë‹µ ê°ì²´ì— ëŒ€í•œ ë³€í™”</li>
  <li>ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ì˜ ë</li>
  <li>ìŠ¤íƒì—ì„œ nextë¯¸ë“¤ì›¨ì–´ ê¸°ëŠ¥ í˜¸ì¶œ</li>
  <li>ë§Œì•½ ë¯¸ë“¤ì›¨ì–´ ê¸°ëŠ¥ì´ ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ì˜ ëì´ ì•„ë‹ˆë¼ë©´, next()ë¥¼ ë°˜ë“œì‹œ í˜¸ì¶œí•˜ì—¬ì•¼ í•œë‹¤.</li>
</ul>

<p>ë¯¸ë“¤ì›¨ì–´ ë˜í•œë„ ì˜ì¡´ì„± ì£¼ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì™„ì „íˆ ì§€ì›ëœë‹¤. ëª¨ë“ˆì—ì„œ ì‚¬ìš©í–ˆë˜ ê²ƒì²˜ëŸ¼, constructorë¥¼ í†µí•´ì„œ ì§„í–‰í•˜ë©´ ëœë‹¤.</p>

<h3 id="applying-middleware">Applying middleware</h3>
<p>@Module()ë°ì½”ë ˆì´í„°ì—ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ìœ„í•œ ìë¦¬ê°€ ì—†ë‹¤. ë°˜ë©´ì—, ëª¨ë“ˆ í´ë ˆìŠ¤ì—ì„œ configure()ë©”ì†Œë“œë¥¼ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ë¯¸ë“¤ì›¨ì–´ë¥¼ í¬í•¨í•œ ëª¨ë“ˆì€ NestModuleì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ëŠ”ë‹¤.
LoggerMiddlewareì„ AppModuleë ˆë²¨ì—ì„œ ì„¤ì •í•´ë³´ì.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span><span class="p">,</span> <span class="nx">NestModule</span><span class="p">,</span> <span class="nx">MiddlewareConsumer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">LoggerMiddleware</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./common/middleware/logger.middleware</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.module</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsModule</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="k">implements</span> <span class="nx">NestModule</span> <span class="p">{</span>
  <span class="nx">configure</span><span class="p">(</span><span class="nx">consumer</span><span class="p">:</span> <span class="nx">MiddlewareConsumer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">consumer</span>
      <span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">LoggerMiddleware</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">forRoutes</span><span class="p">(</span><span class="dl">'</span><span class="s1">cats</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ìœ„ì˜ ì˜ˆì œëŠ” LoggerMiddlewareë¥¼ /cat ë¼ìš°íŒ… í•¸ë“¤ëŸ¬ì— ì ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œì„œ, ì´í›„ì— íŠ¹ì • ìš”ì²­ ë©”ì†Œë“œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ì˜ ì˜ˆì œì—ì„œëŠ” RequestMethod enumì„ ë¶ˆëŸ¬ì˜´ìœ¼ë¡œì„œ ì›í•˜ëŠ” ìš”ì²­ ë©”ì†Œë“œ íƒ€ì…ì„ ì§€ì •í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span><span class="p">,</span> <span class="nx">NestModule</span><span class="p">,</span> <span class="nx">RequestMethod</span><span class="p">,</span> <span class="nx">MiddlewareConsumer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">LoggerMiddleware</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./common/middleware/logger.middleware</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.module</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsModule</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="k">implements</span> <span class="nx">NestModule</span> <span class="p">{</span>
  <span class="nx">configure</span><span class="p">(</span><span class="nx">consumer</span><span class="p">:</span> <span class="nx">MiddlewareConsumer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">consumer</span>
      <span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">LoggerMiddleware</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">forRoutes</span><span class="p">({</span> <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cats</span><span class="dl">'</span><span class="p">,</span> <span class="na">method</span><span class="p">:</span> <span class="nx">RequestMethod</span><span class="p">.</span><span class="nx">GET</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="middleware-consumer">Middleware consumer</h3>
<p>ë¯¸ë“¤ì›¨ì–´ ì»¨ìŠˆë¨¸ëŠ” í—¬í¼ í´ë ˆìŠ¤ë¡œì¨, ì—¬ëŸ¬ ë‚´ì¥ëœ ë©”ì†Œë“œë“¤ì„ ë¯¸ë“¤ì›¨ì–´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ì œê³µí•œë‹¤. ëª¨ë“  ê²ƒë“¤ì€ fluent style<a href="https://en.wikipedia.org/wiki/Fluent_interface">ë§í¬</a>ë¡œ ê°„ë‹¨í•˜ê²Œ ì—°ê²°ë˜ì–´ì§„ë‹¤. forRoutes() ë©”ì†Œë“œëŠ” í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë§ì´ë‚˜, ë³µìˆ˜ì˜ ìŠ¤íŠ¸ë§ì„ ê°€ì§ˆìˆ˜ ìˆê³ , ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ë‚˜ ì‹¬ì§€ì–´ ë³µìˆ˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ë˜í•œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. ë§ì€ ê²½ìš° ì—¬ëŸ¬ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì„ ì½¤ë§ˆë¡œ ë¶„ë¦¬í•˜ì—¬ ì „ë‹¬í•´ ì¤„ ê²ƒì´ë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// logger.midleware.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span><span class="p">,</span> <span class="nx">NestMiddleware</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">Response</span><span class="p">,</span> <span class="nx">NextFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">LoggerMiddleware</span> <span class="k">implements</span> <span class="nx">NestMiddleware</span> <span class="p">{</span>
  <span class="nx">use</span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">,</span> <span class="nx">next</span><span class="p">:</span> <span class="nx">NextFunction</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Request...</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">next</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.module.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Module</span><span class="p">,</span> <span class="nx">NestModule</span><span class="p">,</span> <span class="nx">MiddlewareConsumer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">LoggerMiddleware</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./common/middleware/logger.middleware</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.module</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CatsController</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./cats/cats.controller.ts</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">CatsModule</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="k">implements</span> <span class="nx">NestModule</span> <span class="p">{</span>
  <span class="nx">configure</span><span class="p">(</span><span class="nx">consumer</span><span class="p">:</span> <span class="nx">MiddlewareConsumer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">consumer</span>
      <span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">LoggerMiddleware</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">forRoutes</span><span class="p">(</span><span class="nx">CatsController</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ë§Œì•½ íŠ¹ì • ë¼ìš°íŒ…ì„ ì œì™¸í•˜ê³  ì‹¶ë‹¤ë©´, exclude()ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">consumer</span>
  <span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">LoggerMiddleware</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">exclude</span><span class="p">(</span>
    <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cats</span><span class="dl">'</span><span class="p">,</span> <span class="na">method</span><span class="p">:</span> <span class="nx">RequestMethod</span><span class="p">.</span><span class="nx">GET</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cats</span><span class="dl">'</span><span class="p">,</span> <span class="na">method</span><span class="p">:</span> <span class="nx">RequestMethod</span><span class="p">.</span><span class="nx">POST</span> <span class="p">},</span>
    <span class="dl">'</span><span class="s1">cats/(.*)</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">)</span>
  <span class="p">.</span><span class="nx">forRoutes</span><span class="p">(</span><span class="nx">CatsController</span><span class="p">);</span>
</code></pre></div></div>

<p>ë¬¼ë¡  ìœ„ì˜ ë¡œê±° ë¯¸ë“¤ì›¨ì–´ëŠ” ë©¤ë²„ ë³€ìˆ˜ë„ ì—†ê³ , í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œì„ ê°€ì§€ê³  ìˆë‹¤. ì´ì™€ ê°™ì€ ê²½ìš°, ë¯¸ë“¤ì—ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë‹¨ì¶•ë  ìˆ˜ ìˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">Response</span><span class="p">,</span> <span class="nx">NextFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">logger</span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">,</span> <span class="nx">next</span><span class="p">:</span> <span class="nx">NextFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Request...`</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div></div>
<p>ì ìš©ì€ ìœ„ì˜ ì˜ ì˜ˆì œì™€ ë™ì¼í•˜ê²Œ ì§„í–‰í•˜ë©´ ëœë‹¤.</p>

<h2 id="execption-filters">Execption filters</h2>
<p>Nestì—ì„œëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ì²˜ë¦¬ë˜ì§€ ì•Šì€ ëª¨ë“  ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì˜ˆì™¸ ë ˆì´ì–´ê°€ ë‚´ì¥ë˜ì–´ ìˆë‹¤.
ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ ì´ ë ˆì´ì–´ì—ì„œ ì˜ˆì™¸ë¥¼ í¬ì°©í•˜ì—¬ ì ì ˆí•œ ì‘ë‹µì„ ìë™ìœ¼ë¡œ ë³´ë‚¸ë‹¤.</p>

<p>ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” HttpException í´ë˜ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì˜¤ë¥˜ ì‘ë‹µì„ ì •ì˜í•˜ëŠ” ì˜ˆì´ë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// cats.controller.ts</span>
<span class="p">@</span><span class="nd">Get</span><span class="p">()</span>
<span class="k">async</span> <span class="nx">findAll</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpException</span><span class="p">({</span>
    <span class="na">status</span><span class="p">:</span> <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">FORBIDDEN</span><span class="p">,</span>
    <span class="na">error</span><span class="p">:</span> <span class="dl">'</span><span class="s1">This is a custom message</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span> <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">FORBIDDEN</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ìœ„ì˜ ì˜ˆì œëŒ€ë¡œ ì‘ì„±ì‹œ, ì‘ë‹µì´ ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œëœë‹¤.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">403</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a custom message"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì˜ˆì™¸ ê°ì²´ë¥¼ ì»¤ìŠ¤í…€í•´ì„œ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, ë§Œë“¤ì–´ì•¼ í•  ê²½ìš° ë‹¤ìŒ ì˜ˆì œì²˜ëŸ¼ Nestì—ì„œ ê¸°ë³¸ ì œê³µë˜ëŠ” HttpExecptionë¥¼ ìƒì†ë°›ì•„ ê³ ìœ í•œ ì˜ˆì™¸ ê³„ì¸µì„ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// forbidden.execption.ts</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ForbiddenException</span> <span class="kd">extends</span> <span class="nx">HttpException</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="dl">'</span><span class="s1">Forbidden</span><span class="dl">'</span><span class="p">,</span> <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">FORBIDDEN</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ìœ„ì—ì„œ ìƒì„±ëœ í´ë˜ìŠ¤ëŠ” HttpExceptionì„ ìƒì†ë°›ì•„ ìƒì„±ë˜ë¯€ë¡œ, ì´í•˜ ë©”ì„œë“œë“¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// cats.controller.ts</span>
<span class="p">@</span><span class="nd">Get</span><span class="p">()</span>
<span class="k">async</span> <span class="nx">findAll</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nx">ForbiddenException</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>NestëŠ” HttpExceptionìœ¼ë¡œë¶€í„° íŒŒìƒëœ ëª‡ê°€ì§€ì˜ í‘œì¤€ ì˜ˆì™¸ë¥¼ ì œê³µí•œë‹¤. ì´ ì˜ˆì™¸ë“¤ì€ @nestjs/common íŒ¨í‚¤ì§€ì— ìˆìœ¼ë©°, ë§ì€ ê²½ìš°ì˜ ì˜ˆì™¸ë“¤ì„ í‘œí˜„í•œë‹¤.</p>
<ul>
  <li>badRequestException</li>
  <li>UnauthorizedException</li>
  <li>NotFoundException</li>
  <li>ForbiddenException</li>
  <li>NotAcceptableException</li>
  <li>RequestTimeoutException</li>
  <li>ConflictException</li>
  <li>GoneException</li>
  <li>HttpVersionNotSupportedException</li>
  <li>PayloadTooLargeException</li>
  <li>UnsupportedMediaTypeException</li>
  <li>InternalServerErrorException</li>
  <li>NotImplementedException</li>
  <li>ImATeapotException</li>
  <li>MethodNotAllowedException</li>
  <li>BadGatewayException</li>
  <li>ServiceUnavailableException</li>
  <li>GatewayTimeoutException</li>
  <li>PreconditionFailedException</li>
</ul>

<h3 id="exception-filters">Exception filters</h3>
<p>ë‚´ì¥ ì˜ˆì™¸ í•„í„°ê°€ ìë™ìœ¼ë¡œ ë§ì€ ê²½ìš°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, ì˜ˆì™¸ ë ˆì´ì–´ì— ëŒ€í•œ ì™„ì „í•œ ì œì–´ë¥¼ ì›í• ìˆ˜ë„ ìˆë‹¤. ì˜ˆë¥¼ë“¤ì–´, ë¡œê±°ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ JSONìŠ¤í‚¤ë§ˆë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ì›í•  ìˆ˜ ìˆë‹¤. Exception filtersëŠ” ì´ëŸ¬í•œ ëª©ì ì„ ìœ„í•´ ë””ìì¸ ë˜ì—ˆìœ¼ë©°, ê°œë°œìê°€ ì›í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚´ëŠ” ì‘ë‹µì˜ ë‚´ìš©ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">///http-exception.filter.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ExceptionFilter</span><span class="p">,</span> <span class="nx">Catch</span><span class="p">,</span> <span class="nx">ArgumentsHost</span><span class="p">,</span> <span class="nx">HttpException</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">Response</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Catch</span><span class="p">(</span><span class="nx">HttpException</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">HttpExceptionFilter</span> <span class="k">implements</span> <span class="nx">ExceptionFilter</span> <span class="p">{</span>
  <span class="k">catch</span><span class="p">(</span><span class="nx">exception</span><span class="p">:</span> <span class="nx">HttpException</span><span class="p">,</span> <span class="nx">host</span><span class="p">:</span> <span class="nx">ArgumentsHost</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">host</span><span class="p">.</span><span class="nx">switchToHttp</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">getResponse</span><span class="o">&lt;</span><span class="nx">Response</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">getRequest</span><span class="o">&lt;</span><span class="nx">Request</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">exception</span><span class="p">.</span><span class="nx">getStatus</span><span class="p">();</span>

    <span class="nx">response</span>
      <span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">json</span><span class="p">({</span>
        <span class="na">statusCode</span><span class="p">:</span> <span class="nx">status</span><span class="p">,</span>
        <span class="na">timestamp</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
        <span class="na">path</span><span class="p">:</span> <span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span>
      <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>@Catch(HttpException) ë°ì½”ë ˆì´í„°ëŠ” í•„ìš”í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì˜ˆì™¸ í•„í„°ì— ë°”ì¸ë”©í•˜ì—¬ íŠ¹ì •í•œ í•„í„°ê°€ HttpException íƒ€ì„ì˜ ì˜ˆì™¸ë§Œ ì°¾ê³  ìˆë‹¤ëŠ” ê²ƒì„ Nestì—ê²Œ ì•Œë¦°ë‹¤. @Catch()ë°ì½”ë ˆì´í„°ëŠ” ë‹¨ì¼ ë§¤ê°œë³€ìˆ˜ ë˜ëŠ” ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ëª©ë¡ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , í•œë²ˆì— ì—¬ëŸ¬ íƒ€ì…ì˜ ì˜ˆì™¸ì— ëŒ€í•œ í•„í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>

<p>ìœ„ì—ì„œ ìƒì„±ëœ í•„í„°ëŠ” @UseFilters()ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ì„œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Post</span><span class="p">()</span>
<span class="p">@</span><span class="nd">UseFilters</span><span class="p">(</span><span class="nx">HttpExceptionFilter</span><span class="p">)</span>
<span class="k">async</span> <span class="nx">create</span><span class="p">(@</span><span class="nd">Body</span><span class="p">()</span> <span class="nx">createCatDto</span><span class="p">:</span> <span class="nx">CreateCatDto</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nx">ForbiddenException</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>
<p>** ê°€ëŠ¥í•œ ê²½ìš° ì¸ìŠ¤í„´ìŠ¤ ëŒ€ì‹  ìœ„ì˜ ì˜ˆì œì²˜ëŸ¼ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í•„í„°ë¥¼ ì ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.NestëŠ” ì „ì²´ ëª¨ë“ˆì—ì„œ ë™ì¼í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<h2 id="pipes">Pipes</h2>
<p>íŒŒì´í”„ëŠ” @Injectable()ë°ì½”ë ˆì´í„°ë¡œ ì–´ë…¸í…Œì´ì…˜ëœ í´ë˜ìŠ¤ë¡œ, íŒŒì´í”„ëŠ” PipeTransform ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.</p>

<p>íŒŒì´í”„ì—ëŠ” ë‘ê°€ì§€ ì„ íƒì  ì‚¬ìš©ë²•ì´ ìˆë‹¤.</p>
<ul>
  <li>Transformation: ì…ë ¥ëœ ë°ì´í„°ë¥¼ ì›í•˜ëŠ” í˜•íƒœë¡œ ë³€í™˜í•œë‹¤(stringì—ì„œ integer)</li>
  <li>Validation: ì…ë ¥ëœ ë°ì´í„°ê°€ ìœ íš¨í•˜ë©´ í†µê³¼ì‹œí‚¤ê³ , ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.</li>
</ul>

<p>ë‘ê°€ì§€ ê²½ìš°ì—ì„œ, íŒŒì´í”„ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì²˜ë¦¬í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ ìœ„ì—ì„œ ì‘ë™í•œë‹¤. NestëŠ” ë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ê¸° ë°”ë¡œ ì§ì „ì— ë¼ì–´ë“¤ì–´ì„œ ë©”ì†Œë“œê°€ ì²˜ë¦¬í•  ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ ì‘ë™í•˜ê³ , ë³€í™˜ì´ë‚˜ ê²€ì¦ì„ ìˆ˜í–‰í•œë‹¤.</p>

<p>NestëŠ” ê°œë°œìê°€ ë‚´ë¶€ì—ì„œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ëª°ë¼ë„ ë˜ëŠ” ì—¬ëŸ¬ ë‚´ì¥ íŒŒì´í”„ë¼ì¸ë“¤ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ê°œë°œìê°€ ì»¤ìŠ¤í…€ íŒŒì´í”„ë¥¼ ë§Œë“¤ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.</p>

<p>ë‚´ì¥ íŒŒì´í”„ ëª©ë¡</p>
<ul>
  <li>ValidationPipe</li>
  <li>ParseIntPipe</li>
  <li>ParseFloatPipe</li>
  <li>ParseBoolPipe</li>
  <li>ParseArrayPipe</li>
  <li>ParseUUIDPipe</li>
  <li>ParseEnumPipe</li>
  <li>DefaultValuePipe</li>
</ul>

<h3 id="binding-pipes">Binding pipes</h3>
<p>íŒŒì´í”„ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´, ìš°ë¦¬ëŠ” íŒŒì´í”„ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì ì ˆí•œ ë¬¸ë§¥ì—ì„œ ë°”ì¸ë”©í•´ì•¼ í•œë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ì„œ, ParseIntíŒŒì´í”„ë¥¼ íŠ¹ì • ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ë§¤ì†Œë“œì— ìœ„ì¹˜ì‹œí‚¤ëŠ” ê²ƒì„ ë³´ì.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Get</span><span class="p">(</span><span class="dl">'</span><span class="s1">:id</span><span class="dl">'</span><span class="p">)</span>
<span class="k">async</span> <span class="nx">findOne</span><span class="p">(@</span><span class="nd">Param</span><span class="p">(</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">,</span> <span class="nx">ParseIntPipe</span><span class="p">)</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">catsService</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ì´ ì˜ˆì œëŠ” findOneì´ë¼ëŠ” ë§¤ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì—, @Param(â€œidâ€)ë¥¼ í†µí•´ ê°€ì €ì˜¨ ë°ì´í„°ê°€ Intí˜•ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆëŠ”ì§€ ê²€ì‚¬í•œë‹¤. 
ë§Œì•½ Intí˜•ìœ¼ë¡œ ë³€í™˜ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•œë‹¤.</p>
<pre><code class="language-JSON">{
  "statusCode": 400,
  "message": "Validation failed (numeric string is expected)",
  "error": "Bad Request"
}
</code></pre>

<p>ìœ„ì˜ ì˜ˆì œì—ì„œ ìš°ë¦¬ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì•„ë‹ˆë¼, ParseIntPipe í´ë˜ìŠ¤ë¥¼ ì „ë‹¬í•œë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì„œ ì¸ìŠ¤í„´ìŠ¤í™”ì˜ ì±…ì„ì„ í”„ë ˆì„ì›Œí¬ì—ê²Œ ë„˜ê¸°ê³ , ì˜ì¡´ì„± ì£¼ì…ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.</p>

<h3 id="custom-pipe">Custom pipe</h3>
<p>ê°€ì¥ ê°„ë‹¨í•œ íŒŒì´í”„ë¥¼ ë§Œë“¤ì–´ ë³´ì. ì…ë ¥ê°’ì„ ë°›ì•„ì„œ ì¦‰ì‹œ ê°™ì€ ê°’ì„ ë°˜í™˜í•˜ëŠ” íŒŒì´í”„ì´ë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">PipeTransform</span><span class="p">,</span> <span class="nx">Injectable</span><span class="p">,</span> <span class="nx">ArgumentMetadata</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ValidationPipe</span> <span class="k">implements</span> <span class="nx">PipeTransform</span> <span class="p">{</span>
  <span class="nx">transform</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">metadata</span><span class="p">:</span> <span class="nx">ArgumentMetadata</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ëª¨ë“  íŒŒì´í”„ëŠ” PipeTransform ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶©ì¡±í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— transform() ë©”ì†Œë“œë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤. ì´ ë©”ì†Œë“œì—ëŠ” valueì™€ metatdata ë‘ ê°œì˜ ë°°ê°œë³€ìˆ˜ê°€ ìˆë‹¤.</p>

<p>value ë§¤ê°œë³€ìˆ˜ëŠ” í˜„ì¬ ì²˜ë¦¬ì¤‘ì¸ ë©”ì†Œë“œ ì¸ìˆ˜ì´ê³ , metadataëŠ” í˜„ì¬ ì²˜ë¦¬ì¤‘ì¸ ë©”ì†Œë“œ ì¸ìˆ˜ì˜ ë©”íƒ€ë°ì´í„°ì´ë‹¤.
ë©”íƒ€ë°ì´í„° ê°ì²´ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì†ì„±ë“¤ì´ ìˆë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">ArgumentMetadata</span> <span class="p">{</span>
  <span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">body</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">query</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">param</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">custom</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">metatype</span><span class="p">?:</span> <span class="nx">Type</span><span class="o">&lt;</span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th>Â </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>tpye</td>
      <td>ì¸ìˆ˜ê°€ @Bodyì¸ì§€, @Queryì¸ì§€, @Param()ì¸ì§€ ë˜ëŠ” ì»¤ìŠ¤í…€ ë§¤ê°œë³€ìˆ˜ì¸ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤</td>
    </tr>
    <tr>
      <td>metaType</td>
      <td>ì¸ìˆ˜ì˜ ë©”íƒ€íŒì„ ì œê³µí•œë‹¤.</td>
    </tr>
    <tr>
      <td>data</td>
      <td>ë°ì½”ë ˆì´í„°ì— ì „ë‹¬ëœ ë¬¸ìì—´.</td>
    </tr>
  </tbody>
</table>

<h3 id="schema-based-validation">Schema based validation</h3>
<p>ìœ„ì—ì„œ ë§Œë“  ìœ íš¨ì„± ê²€ì¦ íŒŒì´í”„ë¥¼ ì¡°ê¸ˆ ë” ìœ ìš©í•˜ê²Œ ë§Œë“¤ì–´ë³´ì. ì•„ë˜ ì˜ˆì œì˜ create()ë©”ì†Œë“œì—ì„œ, @Body()ê°€ createCatDto í´ë˜ìŠ¤ë¡œ ìœ íš¨í•œì§€ ê²€ì‚¬í•˜ê²Œ ëœë‹¤. 
ì´ ë‹¨ê³„ ì´ì „ì—, ìš°ë¦¬ëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì´ ìœ íš¨í•œ bodyë¥¼ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì‹¤íˆ í•˜ê³  ì‹¶ë‹¤. ìš°ë¦¬ëŠ” ì´ ì‘ì—…ì„ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ë©”ì†Œë“œì—ì„œ í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì´ë ‡ê²Œ ê²€ì¦í•˜ëŠ”ê²ƒì€ ë‹¨ì¼ ì±…ì„ ì›ì¹™(Single Responsibility Rule, SRP)ì— ìœ„ë°°ëœë‹¤.
ë‹¤ë¥¸ ì ‘ê·¼ìœ¼ë¡œ ìœ íš¨ì„± ê²€ì¦ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì‘ì—…ì„ ì´ í´ë˜ìŠ¤ì— ìœ„ì„í•˜ëŠ” ë°©ë²•ì´ ë  ìˆ˜ ìˆë‹¤. ì´ê²ƒì€ ë§¤ ë©”ì†Œë“œë§ˆë‹¤ ìœ íš¨ì„± ê²€ì¦ì„ ìœ„í•œ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì„ ê¸°ì–µí•˜ì—¬ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤.</p>

<p>ìœ íš¨ì„± ê²€ì¦ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ê°€ëŠ¥í•  ìˆ˜ ìˆì§€ë§Œ, ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë™ì‘í•˜ëŠ” ì¼ë°˜ ë¯¸ë“¤ì›¨ì–´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë¯¸ë“¤ì›¨ì–´ê°€ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œ ë•Œë¬¸ì´ë‹¤.</p>

<p>ê·¸ë ‡ë‹¤ë©´ ì–´ë– í•œ ë°©ë²•ìœ¼ë¡œ ê²€ì¦ íŒŒì´í”„ë¥¼ ê°œì„ í•  ìˆ˜ ìˆì„ê¹Œ</p>

<h3 id="object-schema-validation">Object schema validation</h3>
<p>ê¹”ë”í•˜ê³ , DRY(Do not Reqeat Yourself)í•˜ê²Œ ê°ì²´ ìœ íš¨ì„± ê²€ì¦ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì´ ìˆë‹¤. ê·¸ ì¤‘ ì¼ë°˜ì ì¸ ì ‘ê·¼ì€ ìŠ¤í‚¤ë§ˆì— ê¸°ë°˜í•œ ê²€ì¦ì´ë‹¤.</p>

<p>Joi ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê°„ë‹¨í•˜ê³  ì½ê¸°ì‰¬ìš´ APIë¥¼ í™œìš©í•˜ì—¬ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•´ ì¤€ë‹¤.
ì¼ë‹¨ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë©° ì‹œì‘í•˜ì</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save joi
npm install --save-dev @types/joi
</code></pre></div></div>

<p>ì•„ë˜ì˜ ì˜ˆì œì—ì„œëŠ” ìƒì„±ì ë§¤ê°œë³€ìˆ˜ë¡œ ìŠ¤í‚¤ë§ˆë¥¼ ê°€ì§€ëŠ” ê°„ë‹¨í•œ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  schema.validate()ë©”ì†Œë“œë¥¼ ì ìš©í•¨ìœ¼ë¡œ ê°’ì´ ìŠ¤í‚¤ë§ˆì™€ ìœ íš¨í•œ êµ¬ì¡°ë¥¼ ê°€ì§€ëŠ”ì§€ ê²€ì¦í•œë‹¤.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">PipeTransform</span><span class="p">,</span> <span class="nx">Injectable</span><span class="p">,</span> <span class="nx">ArgumentMetadata</span><span class="p">,</span> <span class="nx">BadRequestException</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/common</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ObjectSchema</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">joi</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">JoiValidationPipe</span> <span class="k">implements</span> <span class="nx">PipeTransform</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">schema</span><span class="p">:</span> <span class="nx">ObjectSchema</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">transform</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">metadata</span><span class="p">:</span> <span class="nx">ArgumentMetadata</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">schema</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">BadRequestException</span><span class="p">(</span><span class="dl">'</span><span class="s1">Validation failed</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="binding-validation-pipes">Binding validation pipes</h3>
<p>ì•ì„œ ParseIntPipeë¥¼ ë°”ì¸ë”©í•œ ê²ƒì²˜ëŸ¼, ìœ„ì˜ ì˜ˆì œ ì½”ë“œë¥¼ í†µí•´ ìƒì„±í•œ ìœ íš¨ì„± ê²€ì¦ íŒŒì´í”„ ë˜í•œ ì ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Post</span><span class="p">()</span>
<span class="p">@</span><span class="nd">UsePipes</span><span class="p">(</span><span class="k">new</span> <span class="nx">JoiValidationPipe</span><span class="p">(</span><span class="nx">createCatSchema</span><span class="p">))</span>
<span class="k">async</span> <span class="nx">create</span><span class="p">(@</span><span class="nd">Body</span><span class="p">()</span> <span class="nx">createCatDto</span><span class="p">:</span> <span class="nx">CreateCatDto</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">catsService</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">createCatDto</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="guards">Guards</h2>
<p>ì´ì „ Node.jsì—ì„œëŠ” ì¸ì¦ì„ ì£¼ë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ ì²˜ë¦¬í•´ ì™”ë‹¤. í•˜ì§€ë§Œ ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•œ ì¸ì¦ ì²˜ë¦¬ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë©ì²­í•  ìˆ˜ ë°–ì— ì—†ë‹¤(Next()ì´í›„ ì–´ë–¤ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë ì§€ë¥¼ ëª¨ë¥¸ë‹¤). Guardë¥¼ ì‚¬ìš©í•´ ì¸ì¦ì„ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•˜ì—¬ í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì•Œ ìˆ˜ ìˆê³  ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ì˜ ì •í™•í•œ ì§€ì ì— ì²˜ë¦¬ ë¡œì§ì„ ì‚½ì…í•˜ê³  ì„ ì–¸ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì´ê²ƒì€ ì½”ë“œë¥¼ DRYí•˜ê³  ì„ ì–¸ì ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.</p>

:ET